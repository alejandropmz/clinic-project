{% extends 'layout.html' %} {% block body %}

<!-- sub-nav -->

<div class="row container-fluid sub-nav d-flex justify-content-between">
  <div class="col-sm-12 col-md-4">
    <i class="bx bx-list-ol"></i>
    <div class="detail">
      <h4>Historial de registros</h4>
    </div>
  </div>
  {% if data %}
  <div class="d-flex justify-content-center col-sm-12 col-md-4">
    <a href="/historial/pacientes"
      ><button class="select-button">Pacientes</button></a
    >
    <a href="/historial/citas"><button class="select-button">Citas</button></a>
    <a href="/historial/pagos"
      ><button class="select-button">Facturas</button></a
    >
  </div>
  {% else %}
  {% endif %}
  <div class="col-sm-12 col-md-4">
    <form action="">
      <input type="text" placeholder="Buscar" />
      <button>Buscar</button>
    </form>
  </div>
</div>

<!-- Render information -->

<div id="forms" class="f-flex justify-content-center">
  {% if data %}
  <table>
    <tr>
      <th id="photo">Foto</th>
      <th>Nombre</th>
      <th>Nacimiento</th>
      <th>Consultas</th>
      <th>Registro</th>
      <th>EliminaciÃ³n</th>
      <th>Acciones</th>
    </tr>
    {% for date in data %}
    <tr>
      <td>
        {% if date[8] == 2 %}
        <i style="font-size: 1.6rem; color: red;" class="bi bi-x-circle"></i>
        {% else %}
        <img
          id="form-photo"
          src="https://affinitaslegal.com/wp-content/uploads/2020/08/imagen-perfil-sin-foto.jpg"
          alt=""
        />
        {% endif %}
      </td>
      <td>{{date[2].title()}} {{date[3].title()}}</td>
      <td>{{date[4].split("-")[2]}}/{{date[4].split("-")[1]}}/{{date[4].split("-")[0]}}</td>
      <td>
        <a href="#"
          ><button type="button" id="add-appointment-patient">
            Historial de consultas
          </button></a
        >
      </td>
      <td>{{date[9].date().strftime("%Y-%m-%d").split("-")[2]}}/{{date[9].date().strftime("%Y-%m-%d").split("-")[1]}}/{{date[9].date().strftime("%Y-%m-%d").split("-")[0]}}</td>
      <td>{% if date[10] %}
        {{date[10].date().strftime("%Y-%m-%d").split("-")[2]}}/{{date[10].date().strftime("%Y-%m-%d").split("-")[1]}}/{{date[10].date().strftime("%Y-%m-%d").split("-")[0]}}
        {% else %}
        <div
          id="approve-dot"
          class="d-flex justify-content-center align-items-center"
        >
          <i class="bi bi-dot"></i><span>Activo</span>
        </div>
        {% endif %}
      </td>
      <td>
        <div class="options-buttons">
          <a href="#"
            ><button type="button">
              <i class="bi bi-eye"></i>
              Ver
            </button></a
          >
          {% if date[8] == 1 %}
          <a href="#">
            <button>
              <i class="bi bi-pencil-square"></i>
              Modificar
            </button>
          </a>
          {% else %}
          {% endif %}
        </div>
      </td>
    </tr>
    {% endfor %}
    {% else %}
    <div class="d-flex justify-content-center detail-info-container">
      <div id="options-container">
        <a href="/historial/pacientes">
          <div>
          <i class='bx bx-male-female'></i>
          <h5>Pacientes</h5>
        </div></a>
        <a href="/historial/citas">
          <div>
          <i class='bx bx-calendar-check'></i>
          <h5>Citas</h5>
        </div></a>
        <a href="/historial/pagos">
          <div>
          <i class='bx bxs-calendar-week'></i>
          <h5>Facturas</h5>
        </div></a>
      </div>
    </div>
  </table>
  {% endif %}
</div>

{% endblock %}
