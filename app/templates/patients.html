{% extends "layout.html" %} {% block body %}

<!-- sub-nav -->

<div class="row container-fluid sub-nav d-flex justify-content-between">
  <div class="col-sm-12 col-md-6">
    <i class="bx bx-male-female"></i>
    <div class="detail">
      <h4>Listado de pacientes</h4>
    </div>
  </div>
  <div class="col-sm-12 col-md-6">
    <form action="">
      <input type="text" placeholder="Buscar paciente" />
      <button>Buscar</button>
    </form>
  </div>
</div>

<!-- options bar -->

<div class="row container-fluid options-bar">
  <div class="col-sm-12 col-md-6 buttons">
    <button>Agregar paciente</button>
  </div>
  <div class="col-sm-12 col-md-6 pagination">
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
      </ul>
    </nav>
  </div>
</div>

<!-- render data information -->

<div id="forms" class="f-flex justify-content-center">
  <table>
    <tr>
      <th id="photo">Foto</th>
      <th>Nombre</th>
      <th>Nacimiento</th>
      <th>Consultas</th>
      <th>Acciones</th>
    </tr>
    {% if patients %} {% for patient in patients %}
    <tr>
      <td>
        <img
          id="form-photo"
          src="https://affinitaslegal.com/wp-content/uploads/2020/08/imagen-perfil-sin-foto.jpg"
          alt=""
        />
      </td>
      <td>{{patient[2].title()}} {{patient[3].title()}}</td>
      <td>
        {{patient[4].split("-")[2]}}/{{patient[4].split("-")[1]}}/{{patient[4].split("-")[0]}}
      </td>
      <td>
        <div class="dropdown">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="bi bi-calendar-event"></i>
            Consultas
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            {% if appointments %}
              {% for appointment in appointments %}
                {% if appointment[4] in patient %}
                <li><a class="dropdown-item" href="#">{{appointment[5]}}</a></li>
                {% endif %}
              {% endfor %}
            {% endif %}
          </ul>
        </div>
      </td>
      <td>
        <div class="options-buttons">
          <button>
            <i class="bi bi-eye"></i>
            Ver
          </button>
          <button>
            <i class="bi bi-pencil-square"></i>
            Modificar
          </button>
        </div>
      </td>
      {% endfor %} {% else %}
      <h2>no patients</h2>
      {% endif %}
    </tr>
  </table>
</div>

{% endblock %}
